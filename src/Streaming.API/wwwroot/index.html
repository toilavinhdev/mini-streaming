<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mini Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="mx-[400px] mt-4">
    <div>
        <label for="videoId" class="text-2xl">Mini Streaming Video:</label><br>
        <div class="flex gap-x-4 mt-4">
            <input type="text" id="videoId" placeholder="Enter video id" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-colors">
            <div>
                <label for="resolution"></label>
                <select id="resolution" class="h-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 bg-white cursor-pointer hover:border-gray-400 transition-colors">
                    <option value="144">144p</option>
                    <option value="240">240p</option>
                    <option value="360">360p</option>
                    <option value="720" selected>720p</option>
                    <option value="1080">1080p</option>
                </select>
            </div>
        </div>
        <button id="playBtn" class="mt-4 w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:shadow-lg hover:-translate-y-0.5 transform transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">Play</button>
    </div>

    <div id="videoContainer" style="display: none;" class="mt-4">
        <video id="videoPlayer" autoplay loop controls class="w-full">
            Trình duyệt của bạn không hỗ trợ video.
        </video>
    </div>
    
    <script>
        const videoIdInput = document.getElementById('videoId');
        const playBtn = document.getElementById('playBtn');
        const videoContainer = document.getElementById('videoContainer');
        const videoPlayer = document.getElementById('videoPlayer');
        const resolution = document.getElementById('resolution');
        
        const streamingApiUrl = "http://localhost:5017/api/video/streaming/";
    
        playBtn.addEventListener('click', () => {
            const videoId = videoIdInput.value.trim();
            const size = resolution.value;
            
            if (!videoId) {
                alert('Please enter video id');
                return;
            }
    
            videoPlayer.src = streamingApiUrl + videoId + "/" + size + "p.m3u8";
            videoContainer.style.display = 'block';
            videoPlayer.play();
        });
    </script>
    </body>
</html>